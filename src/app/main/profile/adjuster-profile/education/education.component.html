<div class="shad-card">
  <div class="heading">
    <div class="title">
      {{metaData.IH_AdjusterPage_Education}}
      <img *ngIf="!editEducationFlag && !addEducationFlag" (click)="onAddEducation()" class='pointer'
        src="./../../../../assets/add.svg" style="float: right;">
    </div>
  </div>
  <div class="card-content">
    <!-- POPUP Starts-->
    <div class="add" *ngIf="addEducationFlag">
      <div class="certi">
        <div class="heading title">
          <label *ngIf="!editEducationFlag">{{metaData.IH_AdjusterPage_Add_Education}}</label>
          <label *ngIf="editEducationFlag">{{metaData.IH_AdjusterPage_Edit_Education}}</label>
        </div>
        <div class="edit-section">
          <div [formGroup]="addEducation" style="margin-top:8px">
            <div class="form-group">
              <input class="inde-input" kendoTextBox formControlName="schoolName" type="text"
                placeholder="{{metaData.IH_AdjusterPage_School_Name}}" maxlength="50" />
              <div class="error" *ngIf="keysEducation['schoolName'].touched &&
                                        keysEducation['schoolName'].errors &&
                                        keysEducation['schoolName'].errors.required
                                        ">
                {{metaData.IH_AdjusterPage_School_Name}} {{metaData.IH_AdjusterPage_Is_Required}}
              </div>
              <div class="error" *ngIf="keysEducation['schoolName'].touched && 
                                        keysEducation['schoolName'].errors && 
                                        keysEducation['schoolName'].errors.pattern">
                {{validationMsg.IH_FieldValidation6}}
              </div>
            </div>

            <div class="form-group">
              <!-- <kendo-dropdownlist
                                                class="dropdown"
                                                formControlName="degreeTypeID"
                                                [data]="['Degree1', 'Degree2', 'Degree3']"
                                                style="width:100%"
                                                
                                              ></kendo-dropdownlist> -->

              <kendo-dropdownlist class="dropdown inde-dropdown" formControlName="degreeTypeID"
                [defaultItem]="degreedefaultItem" style="width:100%" [data]="degreeLookup" valuePrimitive="true"
                [textField]="'value'" [valueField]="'key'" [itemDisabled]="itemDisabled"></kendo-dropdownlist>
              <div class="error" *ngIf="keysEducation['degreeTypeID'].touched &&
                                        keysEducation['degreeTypeID'].errors &&
                                        keysEducation['degreeTypeID'].errors.required
                                        ">
                {{metaData.IH_AdjusterPage_Degree}} {{metaData.IH_AdjusterPage_Is_Required}}
              </div>
            </div>
            <div class="form-group">
              <input class="inde-input" kendoTextBox formControlName="specialization" type="text" maxlength="50"
                placeholder="{{metaData.IH_AdjusterPage_Area_of_Study}}" />
              <div class="error" *ngIf="keysEducation['specialization'].touched &&
                                        keysEducation['specialization'].errors &&
                                        keysEducation['specialization'].errors.required
                                        ">
                {{metaData.IH_AdjusterPage_Area_of_Study}} {{metaData.IH_AdjusterPage_Is_Required}}
              </div>
              <div class="error" *ngIf="keysEducation['specialization'].touched && 
                                        keysEducation['specialization'].errors && 
                                        keysEducation['specialization'].errors.pattern">
                {{validationMsg.IH_FieldValidation7}}
              </div>
            </div>

            <div class="flex">
              <div class="form-group width3" >
                <input class="inde-input" kendoTextBox formControlName="city" type="text" maxlength="50"
                  placeholder="{{metaData.IH_AdjusterPage_City}}" />
                <div class="error" *ngIf="keysEducation['city'].touched &&
                                          keysEducation['city'].errors &&
                                          keysEducation['city'].errors.required
                                          ">
                  {{metaData.IH_AdjusterPage_City}} {{metaData.IH_AdjusterPage_Is_Required}}
                </div>
                <div class="error" *ngIf="keysEducation['city'].touched && 
                                          keysEducation['city'].errors && 
                                          keysEducation['city'].errors.pattern">
                  {{validationMsg.IH_FieldValidation3}}
                </div>

              </div>
              <div class="form-group width3">
                <kendo-dropdownlist class="dropdown inde-dropdown" formControlName="provinceID"
                  [defaultItem]="statedefaultItem" style="width:100%" [data]="stateList" valuePrimitive="true"
                  [textField]="'value'" [valueField]="'key'" [itemDisabled]="itemDisabled"></kendo-dropdownlist>

                <div class="error" *ngIf="keysEducation['provinceID'].touched &&
                                          keysEducation['provinceID'].errors &&
                                          keysEducation['provinceID'].errors.required
                                          ">
                  {{metaData.IH_AdjusterPage_State_only}} {{metaData.IH_AdjusterPage_Is_Required}}
                </div>
              </div>
              <div class="form-group width3">
                <kendo-dropdownlist class="dropdown" formControlName="countryID" [defaultItem]="countryDefaultItem"
                  valuePrimitive="true" [data]="countryLookup" [textField]="'value'" [valueField]="'key'">
                </kendo-dropdownlist>

                <!-- <div
                                              class="error"
                                              *ngIf="
                                              keysEducation['countryID'].touched &&
                                              keysEducation['countryID'].errors &&
                                              keysEducation['countryID'].errors.required
                                              "
                                            > 
                                            Country is required.
                                            </div>-->
              </div>
            </div>
            <div class="flex">
              <div class="form-group width2" >
                <kendo-datepicker class="inde-datepicker" formControlName="startDate"
                  placeholder="{{metaData.IH_AdjusterPage_Start_Date}}" style="width:100%" [bottomView]="'year'"
                  [topView]="'decade'" [format]="'MMM/yyyy'" [max]='maxexpiryDate'></kendo-datepicker>
                <div class="error" *ngIf="keysEducation['startDate'].touched &&
                                          keysEducation['startDate'].errors &&
                                          keysEducation['startDate'].errors.required
                                          ">
                  {{metaData.IH_AdjusterPage_Start_Date}} {{metaData.IH_AdjusterPage_Is_Required}}
                </div>
                <div class="error" *ngIf="keysEducation['startDate'].touched &&
                                          keysEducation['startDate'].errors &&
                                          keysEducation['startDate'].errors.maxError
                                          ">
                  {{metaData.IH_AdjusterPage_StartDateMsg}}
                </div>
                <div class="error" *ngIf="keysEducation['startDate'].touched &&
                                          keysEducation['startDate'].errors &&
                                          keysEducation['startDate'].errors.minError
                ">
                {{metaData.IH_AdjusterPage_Start_Date}} {{validationMsg.IH_Invalid}}
                </div>
              </div>
              <div class="form-group width2" >
                <kendo-datepicker class="inde-datepicker" formControlName="endDate"
                  placeholder="{{metaData.IH_AdjusterPage_End_Date}}" style="width:100%" [bottomView]="'year'"
                  [topView]="'decade'" [format]="'MMM/yyyy'" [min]='minexpiryDate'></kendo-datepicker>
                <div class="error" *ngIf="keysEducation['endDate'].touched &&
                                          keysEducation['endDate'].errors &&
                                          keysEducation['endDate'].hasError('required')
                                          ">
                  {{metaData.IH_AdjusterPage_End_Date}} {{metaData.IH_AdjusterPage_Is_Required}}
                </div>

                <div class="error" *ngIf="keysEducation['endDate'].touched &&
                                          keysEducation['endDate'].errors &&
                                          keysEducation['endDate'].errors.minError
                                          ">
                  {{metaData.IH_AdjusterPage_EndDateMsg}}
                </div>
                <div class="error" *ngIf="keysEducation['endDate'].touched &&
                                          keysEducation['endDate'].errors &&
                                          keysEducation['endDate'].errors.maxError">
                {{metaData.IH_AdjusterPage_End_Date}} {{validationMsg.IH_Invalid}}
               </div>
              </div>
            </div>

            <div class="form-group">
              <textarea class="inde-input" formControlName="notes" placeholder="Description" maxlength="250"
                kendoTextArea>
                </textarea>

              <div class="error" *ngIf="keysEducation['notes'].touched &&
                                        keysEducation['notes'].errors &&
                                        keysEducation['notes'].errors.required
                                        ">
                {{metaData.IH_AdjusterPage_Description}} {{metaData.IH_AdjusterPage_Is_Required}}
              </div>
            </div>



            <button type="button" class="btn-cancel" [disabled]="loader" (click)="cancelEducation()">
              <ng-container>{{metaData.IH_AdjusterPage_Cancel}}</ng-container>
            </button>
            <button type="button" class="btn-save" [disabled]="!addEducation.valid || loader"
              (click)="addEducation_func()">
              <ng-container>{{metaData.IH_AdjusterPage_Save}}</ng-container>
              <i *ngIf="loader && addEducation.valid" class="fas fa-sync spin"></i>
            </button>


          </div>
        </div>
      </div>
    </div>

    <!-- POPUP ENDS-->
    <div class="nodata" *ngIf="publicView.educationViews.length==0 && !addEducationFlag">
      {{metaData.IH_AdjusterPage_No_Education}}</div>
    <ng-container *ngFor="let education of publicView.educationViews; let i = index">
      <div class="card-grid" *ngIf="((!isEducationExpanded && i < 2) || isEducationExpanded) && i !== removeEducation">
        <div class="logo"><i class="fas fa-university"></i></div>
        <div class="grid-content education-hover">
          <div class="content-title">
            <!-- {{education.degreeTypeID}} -->
            {{getValueByKey(education.degreeTypeID, degreeLookup)}}: {{education.specialization}}
            <img *ngIf="!addEducationFlag && !editEducationFlag" src="./../../../../assets/edit.svg"
              (click)="onEditEducation(education);removeEducation=i" class=' pointer displaynone displayblock'
              style="float: right;">
            <i *ngIf="!addEducationFlag && !editEducationFlag"
              class="fas fa-trash-alt  pointer displaynone displayblock"
              (click)="showAlertBox(education.educationID, 2)"></i>
          </div>
          {{education.schoolName}} | {{education.startDate| date: 'MMM yyyy'}} -
          {{education.endDate| date: 'MMM yyyy'}}<br>
          {{education.city}}, {{getValueByKey(education.provinceID, stateList)}} <br>
          <div class="flex-wrap">
            <div class="desc" [style.white-space]="isExpDescExpanded ? 'normal' : 'nowrap'">
              {{education.notes}}
            </div>
            <div *ngIf="!isExpDescExpanded && education.notes.length >100" class="more"
              (click)="isExpDescExpanded = true">{{metaData.IH_AdjusterPage_More}}</div>
          </div>

        </div>
      </div>
    </ng-container>

  </div>
  <div class="card-bottom" *ngIf="!isEducationExpanded && publicView.educationViews.length > 2">
    <div class="show" (click)="isEducationExpanded = true">
      {{metaData.IH_AdjusterPage_see_more}}
      <i class="fa fa-angle-down"></i>
    </div>
  </div>
  <!-- Education Ends-->
</div>




<inde-alert-dialog #indeAlert [message]="'Are you sure you want to delete the record permanently?'"
  (positiveButtonClick)="deleteRecord()" (negativeButtonClick)="hideAlert()">
</inde-alert-dialog>